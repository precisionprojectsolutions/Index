<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>Vendor Portal | Precision Project Solutions</title>
    <meta name="description" content="Vendor registration and verified vendor database.">
    
    <link rel="icon" type="image/png" sizes="32x32" href="logo.jpg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />

    <style>
        /* ==================================================
           GLOBAL & LAYOUT STYLES
        =================================================== */
        :root {
          --color-primary: #1f2c45; 
          --color-secondary: #212534; 
          --color-accent: #fcca3e; 
          --color-accent-hover: #ffd86e; 
          --color-light: #ffffff;
          --color-bg: #f8f9fb;
          --font-main: 'Outfit', sans-serif;
          --shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        html { scroll-behavior: smooth; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--font-main); background: var(--color-bg); color: var(--color-secondary); line-height: 1.7; }
        
        .container { max-width: 1100px; margin: 0 auto; padding: 4em 2em; }
        h1, h2, h3 { color: var(--color-primary); font-weight: 600; }
        h2 { font-size: 2.4rem; text-align: center; margin-bottom: 1.5em; position: relative;}
        h2::after { content: ''; display: block; width: 60px; height: 4px; background: var(--color-accent); margin: 0.5em auto 0; border-radius: 2px; }

        /* Navigation */
        .main-header { background: var(--color-light); display: flex; justify-content: space-between; align-items: center; padding: 1.2em 2em; position: sticky; top: 0; z-index: 1000; box-shadow: var(--shadow); height: 80px; }
        .logo-box { display: flex; align-items: center; gap: 0.8em; }
        .logo-link { display: flex; align-items: center; gap: 0.8em; text-decoration: none; }
        .logo-box img { height: 50px; border-radius: 8px; }
        .logo-title { font-weight: 700; font-size: 1.5rem; color: var(--color-primary); }
        .main-nav { display: flex; gap: 2em; }
        .main-nav a { color: var(--color-secondary); text-decoration: none; font-weight: 600; transition: color 0.3s; position: relative; padding-bottom: 5px; }
        .main-nav a:hover, .main-nav a.active { color: var(--color-primary); }
        .main-nav a:hover::after, .main-nav a.active::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 3px; background: var(--color-accent); }
        .menu-toggle { display: none; background: none; border: none; font-size: 2rem; cursor: pointer; color: var(--color-primary); }

        /* Page Header */
        .page-header { background: linear-gradient(rgba(31,44,69,0.9), rgba(31,44,69,0.8)), url('https://images.unsplash.com/photo-1556761175-5973dc0f32e7?auto=format&fit=crop&w=1600&q=80'); background-size: cover; background-position: center; color: var(--color-light); padding: 6em 2em 4em; text-align: center; margin-bottom: 2em; }
        .page-header h1 { font-size: 3rem; margin-bottom: 0.2em; }

        /* ==================================================
           DATABASE & PAGINATION STYLES
        =================================================== */
        
        /* Controls Container */
        .db-controls {
            display: flex; gap: 1em; margin-bottom: 1.5em; flex-wrap: wrap; justify-content: space-between;
            background: var(--color-light); padding: 1.5em; border-radius: 12px; box-shadow: var(--shadow);
            align-items: center;
        }
        .control-group { display: flex; gap: 1em; flex: 1; min-width: 200px; }
        .search-group { flex: 2; }
        
        .db-input {
            width: 100%; padding: 0.8em 1em; border: 2px solid #eee; border-radius: 8px;
            font-family: var(--font-main); font-size: 1rem; outline: none; transition: border-color 0.3s;
        }
        .db-input:focus { border-color: var(--color-primary); }
        .db-label { font-weight: 600; font-size: 0.9rem; margin-bottom: 0.3em; display: block; color: #666; }

        /* Table */
        .table-container { overflow-x: auto; border-radius: 12px; box-shadow: var(--shadow); background: var(--color-light); min-height: 400px; }
        .vendor-table { width: 100%; border-collapse: collapse; min-width: 800px; }
        .vendor-table thead { background: var(--color-primary); color: var(--color-light); }
        .vendor-table th, .vendor-table td { padding: 1.2em 1.5em; text-align: left; }
        .vendor-table tbody tr { border-bottom: 1px solid #eee; transition: background 0.2s; }
        .vendor-table tbody tr:hover { background: #fdfdfd; }
        
        .v-name { font-weight: 700; color: var(--color-primary); }
        .badge { padding: 0.4em 1em; border-radius: 50px; font-size: 0.8rem; font-weight: 700; text-transform: uppercase; }
        .badge-verified { background: #e3f9e5; color: #1b5e20; }
        .badge-pending { background: #fff8e1; color: #f57f17; }
        .badge-new { background: #e3f2fd; color: #0d47a1; }

        /* --- PAGINATION STYLES --- */
        .pagination-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5em 0;
            margin-top: 1em;
            flex-wrap: wrap;
            gap: 1em;
        }
        .page-info { color: #666; font-size: 0.95rem; }
        .pagination-controls { display: flex; gap: 0.5em; }
        
        .page-btn {
            background: var(--color-light);
            border: 1px solid #ddd;
            color: var(--color-primary);
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        .page-btn:hover { background: #eee; }
        .page-btn.active {
            background: var(--color-accent);
            border-color: var(--color-accent);
            color: var(--color-primary);
            transform: scale(1.1);
        }
        .page-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* Form Wrapper */
        .form-wrapper { background: var(--color-light); padding: 2em; border-radius: 12px; box-shadow: var(--shadow); text-align: center; margin-top: 4em; }
        .responsive-iframe-container { position: relative; padding-bottom: 100%; height: 0; overflow: hidden; max-width: 100%; }
        .responsive-iframe-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }

        /* Mobile */
        @media (max-width: 768px) {
            .db-controls { flex-direction: column; align-items: stretch; }
            .pagination-wrapper { flex-direction: column; justify-content: center; }
            .main-nav { display: none; } 
            .menu-toggle { display: block; }
        }
    </style>
</head>
<body>

<header class="main-header">
    <div class="logo-box">
        <a href="index.html" class="logo-link">
            <img src="logo.jpg" alt="Precision Project Solutions Logo" />
            <span class="logo-title">Precision Project Solutions</span>
        </a>
    </div>
    <nav class="main-nav" id="main-nav">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="services.html">Services</a>
        <a href="vendors.html" class="active">Vendors</a>
        <a href="contact.html">Contact</a>
    </nav>
    <button class="menu-toggle" aria-label="Open menu">&#9776;</button>
</header>

<main>
    <section class="page-header" data-aos="fade-in">
        <h1>Vendor Portal</h1>
        <p>Verified Database & Registration</p>
    </section>

    <div class="container">
        
        <section id="database" data-aos="fade-up">
            <h2>Vendor Database</h2>

            <div class="db-controls">
                <div style="flex: 0 0 120px;">
                    <label class="db-label">Show Rows</label>
                    <select id="rowsPerPage" class="db-input">
                        <option value="25">25</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                    </select>
                </div>

                <div class="control-group search-group">
                    <div style="width: 100%">
                        <label class="db-label">Search</label>
                        <input type="text" id="searchInput" class="db-input" placeholder="Search name or location...">
                    </div>
                </div>

                <div class="control-group">
                    <div style="width: 100%">
                        <label class="db-label">Category</label>
                        <select id="categoryFilter" class="db-input">
                            <option value="all">All Categories</option>
                            <option value="construction">Civil Construction</option>
                            <option value="electrical">Electrical Supplies</option>
                            <option value="consultancy">PM Consultancy</option>
                            <option value="software">Software / IT</option>
                            <option value="logistics">Logistics</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <table class="vendor-table" id="vendorTable">
                    <thead>
                        <tr>
                            <th>Company / ID</th>
                            <th>Category</th>
                            <th>Location</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr data-category="construction">
                            <td>
                                <div class="v-name">BuildRight Infra Ltd.</div>
                                <small>ID: VEN-001</small>
                            </td>
                            <td>Civil Construction</td>
                            <td>üìç Vadodara, GJ</td>
                            <td><span class="badge badge-verified">Verified</span></td>
                        </tr>
                        </tbody>
                </table>
                <div id="noResults" style="display:none; text-align:center; padding: 2em; color: #777;">
                    No results found.
                </div>
            </div>

            <div class="pagination-wrapper">
                <div class="page-info" id="pageInfo">Showing 1 to 25 of 60 entries</div>
                <div class="pagination-controls" id="paginationBtnContainer">
                    </div>
            </div>
        </section>

        <div style="margin: 4em 0; border-top: 1px solid #ddd;"></div>

        <section id="register" data-aos="fade-up">
            <h2>Vendor Registration</h2>
            <div class="form-wrapper">
                <div class="responsive-iframe-container">
                    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfD_PLACEHOLDER/viewform?embedded=true" 
                            width="640" height="800" frameborder="0">Loading‚Ä¶</iframe>
                </div>
            </div>
        </section>

    </div>
</main>

<footer class="main-footer">
    <p>&copy; 2025 Precision Project Solutions.</p>
</footer>

<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script>
    AOS.init({ offset: 100, duration: 800, once: true });

    // ============================================
    // 1. DUMMY DATA GENERATOR (FOR DEMO ONLY)
    // ============================================
    // Only here so you can see pagination working with 25+ items. 
    // Delete this function when you input real data.
    function generateDummyData() {
        const tbody = document.getElementById('tableBody');
        const categories = ['construction', 'electrical', 'consultancy', 'software', 'logistics'];
        const cities = ['Vadodara', 'Mumbai', 'Delhi', 'Bangalore', 'Surat', 'Rajkot'];
        
        for(let i=2; i <= 65; i++) {
            const cat = categories[Math.floor(Math.random() * categories.length)];
            const city = cities[Math.floor(Math.random() * cities.length)];
            const row = document.createElement('tr');
            row.setAttribute('data-category', cat);
            row.innerHTML = `
                <td><div class="v-name">Demo Vendor ${i}</div><small>ID: VEN-00${i}</small></td>
                <td style="text-transform:capitalize">${cat}</td>
                <td>üìç ${city}</td>
                <td><span class="badge badge-verified">Verified</span></td>
            `;
            tbody.appendChild(row);
        }
    }
    generateDummyData(); // <--- REMOVE THIS LINE LATER

    // ============================================
    // 2. MAIN PAGINATION & FILTER LOGIC
    // ============================================
    const tableBody = document.getElementById('tableBody');
    const allRows = Array.from(tableBody.querySelectorAll('tr')); // Capture all rows on load
    const searchInput = document.getElementById('searchInput');
    const categoryFilter = document.getElementById('categoryFilter');
    const rowsPerPageSelect = document.getElementById('rowsPerPage');
    const paginationContainer = document.getElementById('paginationBtnContainer');
    const pageInfo = document.getElementById('pageInfo');
    const noResults = document.getElementById('noResults');

    let currentPage = 1;
    let rowsPerPage = parseInt(rowsPerPageSelect.value);
    let currentFilteredRows = [...allRows]; // Start with all rows

    function init() {
        updateTableLogic();
    }

    // Master Function: Handles Filtering -> Then Pagination -> Then Rendering
    function updateTableLogic() {
        // 1. FILTERING
        const searchTerm = searchInput.value.toLowerCase();
        const categoryValue = categoryFilter.value;

        currentFilteredRows = allRows.filter(row => {
            const textContent = row.innerText.toLowerCase();
            const rowCategory = row.getAttribute('data-category');
            
            const matchesSearch = textContent.includes(searchTerm);
            const matchesCategory = categoryValue === 'all' || rowCategory === categoryValue;
            
            return matchesSearch && matchesCategory;
        });

        // Reset to page 1 if filter changes
        // (But we need to check if this call came from a page click. 
        // For simplicity, we reset page on filter change in the event listeners).
        
        // 2. PAGINATION CALCULATIONS
        const totalItems = currentFilteredRows.length;
        const totalPages = Math.ceil(totalItems / rowsPerPage);
        
        // Handle "No Results"
        if(totalItems === 0) {
            noResults.style.display = 'block';
            tableBody.innerHTML = ''; 
            pageInfo.innerText = 'Showing 0 entries';
            paginationContainer.innerHTML = '';
            return;
        } else {
            noResults.style.display = 'none';
        }

        // Ensure currentPage isn't out of bounds (e.g., if we filtered down to 1 page)
        if (currentPage > totalPages) currentPage = 1;

        const startIndex = (currentPage - 1) * rowsPerPage;
        const endIndex = startIndex + rowsPerPage;
        const rowsToShow = currentFilteredRows.slice(startIndex, endIndex);

        // 3. RENDER TABLE ROWS
        // We detach all rows first, then append only the visible ones. 
        // This is more performant than toggling display:none on 1000 items.
        tableBody.innerHTML = ''; 
        rowsToShow.forEach(row => tableBody.appendChild(row));

        // 4. RENDER PAGINATION BUTTONS
        renderPaginationControls(totalPages, totalItems, startIndex + 1, Math.min(endIndex, totalItems));
    }

    function renderPaginationControls(totalPages, totalItems, startItem, endItem) {
        // Update Info Text
        pageInfo.innerText = `Showing ${startItem} to ${endItem} of ${totalItems} entries`;
        
        paginationContainer.innerHTML = '';

        // Previous Button
        const prevBtn = document.createElement('button');
        prevBtn.className = 'page-btn';
        prevBtn.innerHTML = '&laquo;';
        prevBtn.disabled = currentPage === 1;
        prevBtn.onclick = () => { if(currentPage > 1) { currentPage--; updateTableLogic(); }};
        paginationContainer.appendChild(prevBtn);

        // Page Numbers
        // To prevent too many buttons, we logic could be added here to show ... 
        // For now, we show all pages as per request (1, 2... n)
        for(let i = 1; i <= totalPages; i++) {
            const btn = document.createElement('button');
            btn.className = `page-btn ${i === currentPage ? 'active' : ''}`;
            btn.innerText = i;
            btn.onclick = () => { currentPage = i; updateTableLogic(); };
            paginationContainer.appendChild(btn);
        }

        // Next Button
        const nextBtn = document.createElement('button');
        nextBtn.className = 'page-btn';
        nextBtn.innerHTML = '&raquo;';
        nextBtn.disabled = currentPage === totalPages;
        nextBtn.onclick = () => { if(currentPage < totalPages) { currentPage++; updateTableLogic(); }};
        paginationContainer.appendChild(nextBtn);
    }

    // ============================================
    // 3. EVENT LISTENERS
    // ============================================
    
    // When Search or Filter changes, reset to Page 1
    searchInput.addEventListener('input', () => { currentPage = 1; updateTableLogic(); });
    categoryFilter.addEventListener('change', () => { currentPage = 1; updateTableLogic(); });
    
    // When Rows Per Page changes, reset to Page 1
    rowsPerPageSelect.addEventListener('change', (e) => { 
        rowsPerPage = parseInt(e.target.value); 
        currentPage = 1; 
        updateTableLogic(); 
    });

    // Mobile Menu
    document.querySelector('.menu-toggle').addEventListener('click', () => {
        document.querySelector('.main-nav').classList.toggle('active');
    });

    // Start
    init();

</script>
</body>
</html>
